{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}Editing the thing '{{g.thing.endpoint_id}}' {% endblock %}</h1>
{% endblock %}

{% block content %}
{% if g.user %}
<a href="{{ url_for('thing.list') }}" id="List">List</a>
<a href="{{ url_for('thing.view', thing_id=g.thing['id']) }}" id="View">View</a>
<form method="post">
    <label for="name">Name</label>
    <input name="name" id="name" value="{{ g.thing['endpoint_id'] }}">

    <label for="friendly_name">Friendly Name</label>
    <input name="friendly_name" id="friendly_name" value="{{ g.thing['friendly_name'] }}">

    <label for="description">Description</label>
    <input name="description" id="description" value="{{ g.thing['description'] }}">

    <label for="manufacturer_name">Manufacturer Name</label>
    <input name="manufacturer_name" id="manufacturer_name" value="{{ g.thing['manufacturer_name'] }}">

    <label for="alexa_category_name">Alexa Category</label>
    <select name="alexa_category_name" id="alexa_category_name">
        {% for alexa_category in alexa_categories %}
        {% if g.thing['alexa_category_id'] == alexa_category['id'] %}
        <option id="{{ alexa_category['id'] }}" selected="selected">{{ alexa_category['name'] }}</option>
        {% else %}
        <option id="{{ alexa_category['id'] }}">{{ alexa_category['name'] }}</option>
        {% endif %}
        {% endfor %}
    </select>

    <label for="alexa_capabilities">Alexa Capabilities</label>
    <ul id="alexa_capabilities">
        {% for thing_capability in g.thing_capabilities %}
        <li>
            <select name="alexa_capability_{{ thing_capability['id'] }}" id="alexa_capability_{{ thing_capability['id'] }}">
                {% for alexa_capability in alexa_capabilities %}
                {% if thing_capability['id'] == alexa_capabilities['id'] %}
                <option id="{{ alexa_capability['id'] }}" selected="selected">{{ alexa_capability['name'] }}</option>
                {% else %}
                <option id="{{ alexa_capability['id'] }}">{{ alexa_capability['name'] }}</option>
                {% endif %}
                {% endfor %}
                <input name="alexa_capbility_properties{{ thing_capability['id'] }}" id="alexa_capability_properties_{{ thing_capability['id'] }}"
                    value="{{ thing_capability['properties'] }}">
            </select>
        </li>
        {% endfor %}
    </ul>


    <input type="submit" value="Update">
</form>
{% endif %}
{% endblock %}